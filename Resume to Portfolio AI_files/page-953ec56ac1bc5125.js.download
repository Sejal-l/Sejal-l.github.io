(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4712],{10440:function(e,t,r){Promise.resolve().then(r.bind(r,5542))},39763:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var o=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(e,t)=>{let r=(0,o.forwardRef)((r,a)=>{let{color:i="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:c,children:d,...f}=r;return(0,o.createElement)("svg",{ref:a,...s,width:l,height:l,stroke:i,strokeWidth:c?24*Number(u)/Number(l):u,className:"lucide lucide-".concat(n(e)),...f},[...t.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...(Array.isArray(d)?d:[d])||[]])});return r.displayName="".concat(e),r}},10407:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});let o=(0,r(39763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},15863:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});let o=(0,r(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99376:function(e,t,r){"use strict";var o=r(35475);r.o(o,"useParams")&&r.d(t,{useParams:function(){return o.useParams}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},5542:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var o=r(57437),s=r(2265),n=r(99376),a=r(85806),i=r(45640),l=r(35554),u=r(39711),c=r(12381),d=r(95452),f=r(84939);function h(){let e=(0,d.createClientComponentClient)(),{user:t}=(0,f.a)(),r=(0,n.useParams)(),h=(0,n.useRouter)(),m=r.username,[g,p]=(0,s.useState)(null),[v,x]=(0,s.useState)(null),[b,w]=(0,s.useState)(null),[y,S]=(0,s.useState)(null),[j,k]=(0,s.useState)(!0),[N,C]=(0,s.useState)(null),[I,R]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{(async()=>{k(!0);try{let{data:t,error:r}=await e.from("public_portfolio").select("template, portfolio_data, id, user_id").eq("username",m).single();if(r)throw r;t?(p(t.portfolio_data),S(t.template),x(t.id),w(t.user_id)):C("No portfolio found for this username")}catch(e){console.error("Error fetching portfolio:",e),C("Failed to load portfolio")}finally{k(!1)}})()},[m,e]),(0,s.useEffect)(()=>{var e;if(!t){R(!1);return}if(b&&t.id===b){R(!0);return}let r=null==g?void 0:null===(e=g.contactInfo)||void 0===e?void 0:e.email;if(r&&t.email&&t.email.toLowerCase()===r.toLowerCase()){R(!0);return}R(!1)},[t,b,g]),j)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",children:(0,o.jsxs)("div",{className:"flex flex-col items-center gap-3 sm:gap-4",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-2 border-primary"}),(0,o.jsxs)("p",{className:"text-sm sm:text-base text-center",children:["Loading ",m,"'s portfolio"]})]})});if(N||!g)return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-[#F8F9FF] to-[#F0F0FF] flex items-center justify-center px-4",children:(0,o.jsxs)("div",{className:"max-w-md w-full rounded-2xl border border-gray-200 bg-white shadow-lg p-6 sm:p-8 text-center space-y-3 sm:space-y-4",children:[(0,o.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Portfolio not found"}),(0,o.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 px-2",children:N||"We couldn't find a portfolio for this link. It may have been removed or not created yet."}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-3 mt-3 sm:mt-4",children:[(0,o.jsx)(c.z,{className:"bg-[#9333EA] hover:bg-[#9333EA]/90 text-white rounded-full px-5 sm:px-6 py-2 text-sm sm:text-base",onClick:()=>h.push("/upload"),children:"Upload your resume"}),(0,o.jsx)(c.z,{variant:"ghost",className:"text-xs sm:text-sm text-gray-700",onClick:()=>h.push("/"),children:"Go back home"})]})]})});switch(y){case"template-1":default:return(0,o.jsx)(a.Z,{data:g,portfolioId:null!=v?v:"",isOwner:I});case"template-2":return(0,o.jsx)(i.Z,{data:g,portfolioId:null!=v?v:"",isOwner:I});case"template-3":return(0,o.jsx)(l.Z,{data:g,portfolioId:null!=v?v:"",isOwner:I});case"template-4":return(0,o.jsx)(u.Z,{data:g,portfolioId:null!=v?v:"",isOwner:I})}}},12381:function(e,t,r){"use strict";r.d(t,{z:function(){return u}});var o=r(57437),s=r(2265),n=r(98482),a=r(90535),i=r(93448);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:a,asChild:u=!1,...c}=e,d=u?n.g7:"button";return(0,o.jsx)(d,{className:(0,i.cn)(l({variant:s,size:a,className:r})),ref:t,...c})});u.displayName="Button"},84939:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var o=r(57437),s=r(2265),n=r(95452);let a=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null),[l,u]=(0,s.useState)(!0),[c,d]=(0,s.useState)(!1),f=(0,n.createClientComponentClient)(),h=async()=>{let{error:e}=await f.auth.signOut();if(e)console.error("Logout error:",e);else{i(null);{let e=[];for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(r.startsWith("portfolioData-")||r.startsWith("resumeText-")||r.startsWith("username-")||"postAuthRedirect"===r||"authRedirect"===r||"previousUrl"===r||"builder-draft"===r)&&e.push(r)}e.forEach(e=>sessionStorage.removeItem(e));let t=[];for(let e=0;e<localStorage.length;e++){let r=localStorage.key(e);r&&(r.startsWith("portfolioData-")||r.startsWith("resumeText-")||r.startsWith("username-")||"postAuthRedirect"===r)&&t.push(r)}t.forEach(e=>localStorage.removeItem(e))}}},m=async()=>{try{sessionStorage.setItem("authRedirect","true"),d(!0);let e="".concat(window.location.origin,"/dashboard"),{error:t}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});if(t)throw t;console.log("Google login started")}catch(e){console.error("Google login error:",e),d(!1),sessionStorage.removeItem("authRedirect")}};return(0,s.useEffect)(()=>{let e=!1;(async()=>{var t,r;{"true"===sessionStorage.getItem("authRedirect")&&d(!0);let r=new URL(window.location.href),o=r.searchParams.get("code");if(o)try{d(!0);let{data:s,error:n}=await f.auth.exchangeCodeForSession(o);!e&&(n?(console.error("Exchange code error:",n),sessionStorage.removeItem("authRedirect"),d(!1)):(null==s?void 0:null===(t=s.session)||void 0===t?void 0:t.user)&&(i(s.session.user),sessionStorage.removeItem("authRedirect"),r.search="",window.history.replaceState({},"",r.toString()),d(!1)))}catch(t){e||(console.error("Unexpected exchange error:",t),sessionStorage.removeItem("authRedirect"),d(!1))}}let{data:o,error:s}=await f.auth.getSession();e||(s?console.error("Get session error:",s):i((null==o?void 0:null===(r=o.session)||void 0===r?void 0:r.user)||null),u(!1))})();let t=f.auth.onAuthStateChange((t,r)=>{e||(i((null==r?void 0:r.user)||null),(null==r?void 0:r.user)&&(sessionStorage.removeItem("authRedirect"),d(!1)),u(!1))});return()=>{e=!0,t.data.subscription.unsubscribe()}},[f]),(0,s.useEffect)(()=>{if(!c||r)return;let e=!1,t=setInterval(async()=>{var r;let{data:o,error:s}=await f.auth.getSession();if(!e){if(s){console.error("Polling session error:",s);return}(null==o?void 0:null===(r=o.session)||void 0===r?void 0:r.user)&&(i(o.session.user),sessionStorage.removeItem("authRedirect"),d(!1),u(!1),clearInterval(t))}},1500);return()=>{e=!0,clearInterval(t)}},[c,r,f]),(0,o.jsx)(a.Provider,{value:{user:r,initializing:l,authInProgress:c,logOut:h,loginWithGoogle:m},children:t})},l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var o=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,o.W)(t))}}},function(e){e.O(0,[5452,3969,4242,429,9769,5806,7621,2971,2117,1744],function(){return e(e.s=10440)}),_N_E=e.O()}]);