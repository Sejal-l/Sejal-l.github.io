(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{92675:function(e,t,r){Promise.resolve().then(r.t.bind(r,2827,23)),Promise.resolve().then(r.t.bind(r,34021,23)),Promise.resolve().then(r.bind(r,94242)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.t.bind(r,2648,23)),Promise.resolve().then(r.bind(r,84939))},84939:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return l}});var o=r(57437),s=r(2265),n=r(95452);let a=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null),[l,u]=(0,s.useState)(!0),[c,h]=(0,s.useState)(!1),f=(0,n.createClientComponentClient)(),d=async()=>{let{error:e}=await f.auth.signOut();if(e)console.error("Logout error:",e);else{i(null);{let e=[];for(let t=0;t<sessionStorage.length;t++){let r=sessionStorage.key(t);r&&(r.startsWith("portfolioData-")||r.startsWith("resumeText-")||r.startsWith("username-")||"postAuthRedirect"===r||"authRedirect"===r||"previousUrl"===r||"builder-draft"===r)&&e.push(r)}e.forEach(e=>sessionStorage.removeItem(e));let t=[];for(let e=0;e<localStorage.length;e++){let r=localStorage.key(e);r&&(r.startsWith("portfolioData-")||r.startsWith("resumeText-")||r.startsWith("username-")||"postAuthRedirect"===r)&&t.push(r)}t.forEach(e=>localStorage.removeItem(e))}}},v=async()=>{try{sessionStorage.setItem("authRedirect","true"),h(!0);let e="".concat(window.location.origin,"/dashboard"),{error:t}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});if(t)throw t;console.log("Google login started")}catch(e){console.error("Google login error:",e),h(!1),sessionStorage.removeItem("authRedirect")}};return(0,s.useEffect)(()=>{let e=!1;(async()=>{var t,r;{"true"===sessionStorage.getItem("authRedirect")&&h(!0);let r=new URL(window.location.href),o=r.searchParams.get("code");if(o)try{h(!0);let{data:s,error:n}=await f.auth.exchangeCodeForSession(o);!e&&(n?(console.error("Exchange code error:",n),sessionStorage.removeItem("authRedirect"),h(!1)):(null==s?void 0:null===(t=s.session)||void 0===t?void 0:t.user)&&(i(s.session.user),sessionStorage.removeItem("authRedirect"),r.search="",window.history.replaceState({},"",r.toString()),h(!1)))}catch(t){e||(console.error("Unexpected exchange error:",t),sessionStorage.removeItem("authRedirect"),h(!1))}}let{data:o,error:s}=await f.auth.getSession();e||(s?console.error("Get session error:",s):i((null==o?void 0:null===(r=o.session)||void 0===r?void 0:r.user)||null),u(!1))})();let t=f.auth.onAuthStateChange((t,r)=>{e||(i((null==r?void 0:r.user)||null),(null==r?void 0:r.user)&&(sessionStorage.removeItem("authRedirect"),h(!1)),u(!1))});return()=>{e=!0,t.data.subscription.unsubscribe()}},[f]),(0,s.useEffect)(()=>{if(!c||r)return;let e=!1,t=setInterval(async()=>{var r;let{data:o,error:s}=await f.auth.getSession();if(!e){if(s){console.error("Polling session error:",s);return}(null==o?void 0:null===(r=o.session)||void 0===r?void 0:r.user)&&(i(o.session.user),sessionStorage.removeItem("authRedirect"),h(!1),u(!1),clearInterval(t))}},1500);return()=>{e=!0,clearInterval(t)}},[c,r,f]),(0,o.jsx)(a.Provider,{value:{user:r,initializing:l,authInProgress:c,logOut:d,loginWithGoogle:v},children:t})},l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2648:function(){},2778:function(){},34021:function(e){e.exports={style:{fontFamily:"'__Fraunces_ae2eaa', '__Fraunces_Fallback_ae2eaa'",fontStyle:"normal"},className:"__className_ae2eaa",variable:"__variable_ae2eaa"}},2827:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}},61994:function(e,t,r){"use strict";function o(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,o,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(o=e(t[r]))&&(s&&(s+=" "),s+=o)}else for(o in t)t[o]&&(s&&(s+=" "),s+=o)}return s}(e))&&(o&&(o+=" "),o+=t);return o}r.d(t,{W:function(){return o}}),t.Z=o}},function(e){e.O(0,[346,8986,5711,5452,4242,2971,2117,1744],function(){return e(e.s=92675)}),_N_E=e.O()}]);